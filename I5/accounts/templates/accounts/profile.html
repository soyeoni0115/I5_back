{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로필</title>
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
</head>

<body>
    <div class="container">
        <header class="header">
            <span class="logo-text-left">
                <a href="{% url 'main' %}">
                    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M0 10C0 4.47715 4.47715 0 10 0H40C45.5228 0 50 4.47715 50 10V40C50 45.5228 45.5228 50 40 50H10C4.47715 50 0 45.5228 0 40V10Z"
                            fill="#62C370" />
                        <path d="M12.5 14.8711H8V37.3711H41V31.8711" stroke="white" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M12.5 12.3699C13.9735 11.3574 15.6957 12.5001 26 14.8631V37.5217C20.0364 33.0381 16.4083 34.3639 12.5 33.8631V12.3699Z"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M26.5 36.8754C29.5311 34.2876 33.2064 33.491 38 33.8711" stroke="white"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M30 21C30 19.8954 30.8954 19 32 19H44C45.1046 19 46 19.8954 46 21V27C46 28.1046 45.1046 29 44 29H32C30.8954 29 30 28.1046 30 27V21Z"
                            fill="#4A90E2" />
                        <path
                            d="M34.6992 25.1055C34.5195 25.1055 34.3535 25.0605 34.2012 24.9707C34.0488 24.8809 33.9277 24.7617 33.8379 24.6133C33.752 24.4609 33.7109 24.2969 33.7148 24.1211C33.7109 23.9453 33.752 23.7832 33.8379 23.6348C33.9277 23.4863 34.0488 23.3691 34.2012 23.2832C34.3535 23.1934 34.5195 23.1484 34.6992 23.1484C34.8672 23.1484 35.0254 23.1934 35.1738 23.2832C35.3262 23.3691 35.4473 23.4863 35.5371 23.6348C35.627 23.7832 35.6719 23.9453 35.6719 24.1211C35.6719 24.2969 35.627 24.4609 35.5371 24.6133C35.4473 24.7617 35.3262 24.8809 35.1738 24.9707C35.0254 25.0605 34.8672 25.1055 34.6992 25.1055ZM38.0859 25.1055C37.9062 25.1055 37.7402 25.0605 37.5879 24.9707C37.4355 24.8809 37.3145 24.7617 37.2246 24.6133C37.1387 24.4609 37.0977 24.2969 37.1016 24.1211C37.0977 23.9453 37.1387 23.7832 37.2246 23.6348C37.3145 23.4863 37.4355 23.3691 37.5879 23.2832C37.7402 23.1934 37.9062 23.1484 38.0859 23.1484C38.2539 23.1484 38.4121 23.1934 38.5605 23.2832C38.7129 23.3691 38.834 23.4863 38.9238 23.6348C39.0137 23.7832 39.0586 23.9453 39.0586 24.1211C39.0586 24.2969 39.0137 24.4609 38.9238 24.6133C38.834 24.7617 38.7129 24.8809 38.5605 24.9707C38.4121 25.0605 38.2539 25.1055 38.0859 25.1055ZM41.4727 25.1055C41.293 25.1055 41.127 25.0605 40.9746 24.9707C40.8223 24.8809 40.7012 24.7617 40.6113 24.6133C40.5254 24.4609 40.4844 24.2969 40.4883 24.1211C40.4844 23.9453 40.5254 23.7832 40.6113 23.6348C40.7012 23.4863 40.8223 23.3691 40.9746 23.2832C41.127 23.1934 41.293 23.1484 41.4727 23.1484C41.6406 23.1484 41.7988 23.1934 41.9473 23.2832C42.0996 23.3691 42.2207 23.4863 42.3105 23.6348C42.4004 23.7832 42.4453 23.9453 42.4453 24.1211C42.4453 24.2969 42.4004 24.4609 42.3105 24.6133C42.2207 24.7617 42.0996 24.8809 41.9473 24.9707C41.7988 25.0605 41.6406 25.1055 41.4727 25.1055Z"
                            fill="white" />
                    </svg>
                </a>

            </span>
            <span class="home-text">홈</span>
            <div class="search-bar">
                <input type="text" placeholder="검색하세요.">
                <button class="search-button"><svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg></button>
            </div>
        </header>

        <main>
            <section class="profile-section">
                <h2 class="section-title">프로필</h2>
                <p class="section-description">내 계정 정보를 확인하고 관리할 수 있습니다.</p>

                <div class="profile-card">
                    <div class="profile-info">
                        <div class="profile-avatar"></div>
                        <div class="profile-text">
                            <span class="username">{{user.username}}</span>
                            <span class="email-placeholder">{{user.email}}</span>
                        </div>
                    </div>

                    {% comment %} <a href = "{% url 'accounts:profile_update' %}"> {% endcomment %}
                    <button class="edit-button" id="openModalBtn"   >프로필 수정</button>
                    {% comment %} </a> {% endcomment %}

                </div>
            </section>

            <hr class="section-divider">

            <section class="activity-summary">
                <h2 class="section-title">활동 요약</h2>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="card-icon-saved"> <svg width="80" height="80" viewBox="0 0 90 90" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <rect width="90" height="90" rx="10" fill="#62C370" />
                                <g filter="url(#filter0_d_295_364)">
                                    <rect x="10" y="28.998" width="75" height="46" rx="18" fill="white" />
                                </g>
                                <g filter="url(#filter1_d_295_364)">
                                    <rect x="5" y="25.1582" width="74.4237" height="45.1366" rx="18"
                                        transform="rotate(-7.84608 5 25.1582)" fill="white" />
                                </g>
                                <defs>
                                    <filter id="filter0_d_295_364" x="6" y="28.998" width="83" height="54"
                                        filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                        <feOffset dy="4" />
                                        <feGaussianBlur stdDeviation="2" />
                                        <feComposite in2="hardAlpha" operator="out" />
                                        <feColorMatrix type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                            result="effect1_dropShadow_295_364" />
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_295_364"
                                            result="shape" />
                                    </filter>
                                    <filter id="filter1_d_295_364" x="3.28711" y="17.2852" width="83.3145"
                                        height="58.3008" filterUnits="userSpaceOnUse"
                                        color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                        <feOffset dy="4" />
                                        <feGaussianBlur stdDeviation="2" />
                                        <feComposite in2="hardAlpha" operator="out" />
                                        <feColorMatrix type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                            result="effect1_dropShadow_295_364" />
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_295_364"
                                            result="shape" />
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="card-info">
                            <p class="card-label">저장한 단어 수</p>
                            <p class="card-count">{{bookmark_count}}</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon-ranking"> <svg width="80" height="80" viewBox="0 0 90 90" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <rect width="90" height="90" rx="10" fill="#62C370" />
                                <path d="M15 25C15 22.2386 17.2386 20 20 20H90V80C90 85.5229 85.5229 90 80 90H15V25Z"
                                    fill="#EBEDF0" />
                                <rect x="22.5" y="27.5" width="35" height="24" rx="1.5" fill="#4A90E2"
                                    fill-opacity="0.5" stroke="#4A90E2" />
                                <path d="M64 29C64 27.8954 64.8954 27 66 27H90V52H66C64.8954 52 64 51.1046 64 50V29Z"
                                    fill="white" />
                                <path d="M64 58C64 56.8954 64.8954 56 66 56H90V81H66C64.8954 81 64 80.1046 64 79V58Z"
                                    fill="white" />
                                <rect x="22" y="56" width="36" height="25" rx="2" fill="white" />
                                <path d="M33 30L27.6667 36L25 33" stroke="#4A90E2" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="card-info">
                            <p class="card-label">미니 게임 랭킹</p>
                            <p class="card-count">{{user_rank}}위</p>
                        </div>
                    </div>
                </div>
            </section>

            <hr class="section-divider">

            <section class="my-wordbook">
                <h2 class="section-title">내 단어장</h2>
                <a href="{% url 'words:bookmark_list' %}" div class="wordbook-link">
                    <div class="link-content">
                        <div class="link-icon"> 
                            <svg width="80" height="80" viewBox="0 0 90 90" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <rect width="90" height="90" rx="10" fill="#62C370" />
                                <g filter="url(#filter0_d_0_1)">
                                    <rect x="10" y="29" width="75" height="46" rx="18" fill="white" />
                                </g>
                                <g filter="url(#filter1_d_0_1)">
                                    <rect x="5" y="25.1602" width="74.4237" height="45.1366" rx="18"
                                        transform="rotate(-7.84608 5 25.1602)" fill="white" />
                                </g>
                                <defs>
                                    <filter id="filter0_d_0_1" x="6" y="29" width="83" height="54"
                                        filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                        <feOffset dy="4" />
                                        <feGaussianBlur stdDeviation="2" />
                                        <feComposite in2="hardAlpha" operator="out" />
                                        <feColorMatrix type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                            result="effect1_dropShadow_0_1" />
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_0_1"
                                            result="shape" />
                                    </filter>
                                    <filter id="filter1_d_0_1" x="3.28711" y="17.2871" width="83.3145" height="58.3008"
                                        filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                        <feOffset dy="4" />
                                        <feGaussianBlur stdDeviation="2" />
                                        <feComposite in2="hardAlpha" operator="out" />
                                        <feColorMatrix type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                            result="effect1_dropShadow_0_1" />
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_0_1"
                                            result="shape" />
                                    </filter>
                                </defs>
                            </svg>

                        </div>
                        <span>단어장으로 이동</span>
                    </div>
                    <span class="arrow-icon">➤</span>
                </a>
                </div>
            </section>

            <hr class="section-divider">

            <section class="customer-support">
                <h2 class="section-title">고객 지원</h2>
                <div class="support-links">
                    <a href="#">자주 묻는 질문</a>
                    <a href="#">문의하기</a>
                    <a href="#">약관 및 개인정보처리방침</a>
                </div>
            </section>
        </main>
    </div>

    <!-- 프로필 수정 모달 -->
    <div class="modal-overlay" id="profileModal">
    <form class="modal-content" method="POST" action="{% url 'accounts:profile_update' %}">
        {%csrf_token%}
        <button type="button" class="modal-close-btn" id="closeModalBtn">&times;</button>
        
        <div class="modal-profile-avatar"></div>
        
        <button type="button" class="modal-image-btn">이미지 선택</button>
        <button type="button" class="modal-image-btn">이미지 삭제</button>

        <div class="modal-input-group">
            <label for="{{ form.username.id_for_label }}">닉네임</label>
            {{ form.username }}
            
        </div>

        <div class="modal-input-group">
            <label for="{{ form.email.id_for_label }}">이메일</label>
            {{ form.email }}
        </div>
        
        <div class="modal-section-title">비밀번호</div>
        <div class="modal-password-desc">
            비밀번호는 재설정이 가능합니다.<br>
            비밀번호를 잊으셨다면 아래 버튼을 클릭하세요.
        </div>
        <button type="button" class="modal-pw-btn">비밀번호 재설정</button>
        
        <button type="submit" class="modal-save-btn">저장하기</button>
        
        </form>
</div>
    
    <script src="{% static 'js/profile.js' %}"></script>
</body>

</html>